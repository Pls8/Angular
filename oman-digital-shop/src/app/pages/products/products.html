<h1>Products</h1>
<div style="display:flex;gap:0.5rem;margin-bottom:2rem">
    <input type="text" [(ngModel)]="searchTerm" placeholder="Search products..." (keyup.enter)="search()"
        style="flex:1;padding:0.75rem;border:1px solid #ddd;border-radius:4px">

    <button (click)="search()">Search</button>

</div>
@if (loading) {
<p>Loading products...</p>
} @else if (products.length === 0) {
<p>No products found.</p>
} @else {
<div>
    @for (product of products; track product.id) {
    <div >
        <img [src]="product.imageUrl || 'favicon.ico'" [alt]="product.name"
            style="width:100%;height:200px;object-fit:cover">
        <div style="padding:1rem">
            <h3 style="margin:0 0 0.5rem">{{ product.name }}</h3>
            <p >{{ product.category?.name }}</p>
            <p >{{ product.price | currency:'OMR' }}</p>
            <div style="display:flex;gap:0.5rem">

                <a [routerLink]="['/products', product.id]">View</a>

                <button (click)="addToCart(product)" [disabled]="product.stockQuantity === 0"
                    style="flex:1;padding:0.5rem;background:#DD0031;color:white;border:none;border-radius:4px;cursor:pointer">Add
                    to
                    Cart</button>
            </div>
        </div>
    </div>
    }
</div>
}